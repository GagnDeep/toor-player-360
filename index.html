<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <meta name="HandheldFriendly" content="true">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <link rel="stylesheet" href="tourPlayer/tour-player.css">
    <script src="tourPlayer/tour-player.js"></script>
    <script src="./simpleDrawingBoard.js"></script>
    <title>LOFT 904</title>
    <style>
        /* Цвет всех маркеров */
        #markers .button {
            /*background-color: rgba(0,0,0,.8);*/
        }

        /* Цвет информационных маркеров */
        #markers .button.info{
            background-color: #06f;
        }

        /* Цвет полосы загрузки */
        #control-panel .progress-bar .value {
            /*background: #ed1c24;*/
        }
        .playground{
            display: flex;
        }

        .hidden{
            display: none;
        }

        #canvas-drawing{
            background:white
        }

    </style>
</head>
    <body>
        <div class="popup-layout">
            <div class="popups">
                <div class="close"></div>
                <div class="popup" id="video">
                    <video src="videos/macbook.mp4" type="video/mp4" controls >
                        <p>Ваш браузер не поддерживает элемент video.</p>
                    </video>
                    <div class="content">
                        <h1>Добавление видео в тур</h1>
                        <p>В виртуальный тур мы можем добавить видео, это может быть анимация камина или рекламный ролик в телевизоре вашего интерьера.</p>
                    </div>
                </div>

                <div class="popup" id="profoto">
                    <img data-src="avif/images/profoto.jpg" alt="">
                    <div class="content">
                        <h1>Моноблок Profoto D1</h1>
                        <p><b>Время перезарядки:</b> 0,2-0,95 сек, <b>Длительность импульса:</b> 1/1000-1/2600, <b>Мощность:</b> 500 Дж, <b>Байонет:</b> ProFoto, <b>Страна производителя:</b> Швеция</p>
                    </div>
                </div>

                <div class="popup" id="product0">
                    <div class="slider">
                        <img data-src="avif/images/0-1.jpg" alt="">
                        <img data-src="avif/images/0-2.jpg" alt="">
                        <img data-src="avif/images/0-3.jpg" alt="">
                    </div>
                    <div class="content">
                        <h1>Подвесной свет</h1>
                        <p>10308 model</p>
                    </div>
                </div>

                <div class="popup" id="product1">
                    <div class="slider">
                        <img data-src="avif/images/1-1.jpg" alt="">
                        <img data-src="avif/images/1-2.jpg" alt="">
                        <img data-src="avif/images/1-3.jpg" alt="">
                        <img data-src="avif/images/1-4.jpg" alt="">
                        <img data-src="avif/images/1-5.jpg" alt="">
                    </div>
                    <div class="content">
                        <h1>Диван</h1>
                        <p>Ширина 100 см., длина 243 см., высота 77 см., материал: дерево, ткань.</p>
                    </div>
                </div>

                <div class="popup" id="product2">
                    <div class="slider">
                        <img data-src="avif/images/2-1.jpg" alt="">
                        <img data-src="avif/images/2-2.jpg" alt="">
                        <img data-src="avif/images/2-3.jpg" alt="">
                        <img data-src="avif/images/2-4.jpg" alt="">
                        <img data-src="avif/images/2-5.jpg" alt="">
                        <img data-src="avif/images/2-6.jpg" alt="">
                    </div>
                    <div class="content">
                        <h1>Кресло</h1>
                        <p>Ширина 99 см, длина 71 см, высота 97 см, высота сидения 43 см, материал: металл,ткань</p>
                    </div>
                </div>

                <div class="popup" id="product3">
                    <div class="slider">
                        <img data-src="avif/images/3-1.jpg" alt="">
                        <img data-src="avif/images/3-2.jpg" alt="">
                        <img data-src="avif/images/3-3.jpg" alt="">
                        <img data-src="avif/images/3-4.jpg" alt="">
                        <img data-src="avif/images/3-5.jpg" alt="">
                    </div>
                    <div class="content">
                        <h1>Кресло</h1>
                        <p>Высота 84 см, высота посадочного места 37 см, глубина 98 см, ширина 66 см, материал: экокожа</p>
                    </div>
                </div>

                <div class="popup" id="product4">
                    <div class="slider">
                        <img data-src="avif/images/4-1.jpg" alt="">
                        <img data-src="avif/images/4-2.jpg" alt="">
                        <img data-src="avif/images/4-3.jpg" alt="">
                        <img data-src="avif/images/4-5.jpg" alt="">
                        <img data-src="avif/images/4-6.jpg" alt="">
                    </div>
                    <div class="content">
                        <h1>Кресло</h1>
                        <p>Высота 89 см, высота посадочного места 49 см, ширина 80 см, длина 82 см</p>
                    </div>
                </div>

                <div class="popup" id="product5">
                    <div class="slider">
                        <img data-src="avif/images/5-1.jpg" alt="">
                        <img data-src="avif/images/5-2.jpg" alt="">
                    </div>
                    <div class="content">
                        <h1>Столик</h1>
                        <p>Диаметр 80 см, высота 26 см, материал: металл, камень</p>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="playground hidden" style="position:fixed; inset:0;  top:0; left:0; bottom: 0; right:0; background: rgba(0, 0, 0, 0.6); z-index: 9999;align-items: center; justify-content: center;">
            <iframe class="drawing-board" style="height:80%; width: 50%" src="https://excalidraw.com/#room=9123fgae3aa84dff9d20,pfLqgEoY1c287ggLmGwsFA"></iframe>
            <div class="logo-hide">hidden</div>
        </div>
        <script>
            Tour.init(false, {
                iFrameScaleControl: false,
              controlPanel: true,
              gallery: true,
              galleryVisible: false,
              cursor: false,
              paht: "avif/panorams/"
          });

          Tour.on('load', function(data) {

            setTimeout(() => {

                const markers = document.querySelectorAll(".marker");
                let marker = Array.from(markers).filter(item => item.textContent === "Drawing Board")[0]
                const playground = document.querySelector(".playground")
                const board = document.querySelector("#canvas-drawing");

                window.addEventListener("keydown", event => {
                    if(event.key === "Escape"){
                        playground.classList.add("hidden")
                    }
                })

                let int = setInterval(() => {

                    marker = Array.from(markers).filter(item => item.textContent === "Drawing Board")[0]
                    if(!marker) return 
                    marker.addEventListener("click", (e) => {
                        e.stopImmediatePropagation();
                        e.preventDefault();
                        playground.classList.toggle("hidden")
                    }, true)

                    clearInterval(int)

                },2000)
              
            },3000)

          })
        </script>


    </body>
</html>
